<!doctype html>

<html lang="en">
<head>
  <meta charset="utf-8">
  <title>rbui log analysis report</title>
  <meta name="description" content="rbui log analysis report">
  <style type="text/css">
    html, body {
      background-color: black;
    }
    th {
      text-align: center;
      color: silver;
      font-style: bold;
      padding: 5px;
      cursor: pointer;
    }
    table {
      width: auto;
      border-collapse: collapse;
      margin: 1%;
      color: silver;
    }
    td {
      text-align: right;
      font-size: 1.1em;
      padding: 5px;
    }
    .report-table-body-cell-url {
      text-align: left;
      width: 20%;
    }
    .clipped {
      white-space: nowrap;
      text-overflow: ellipsis;
      overflow:hidden !important;
      max-width: 700px;
      word-wrap: break-word;
      display:inline-block;
    }
    .url {
      cursor: pointer;
      color: #729FCF;
    }
    .alert {
      color: red;
    }
  </style>
</head>

<body>
  <table border="1" class="report-table">
  <thead>
    <tr class="report-table-header-row">
    </tr>
  </thead>
  <tbody class="report-table-body">
  </tbody>

  <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  <script type="text/javascript" src="jquery.tablesorter.min.js"></script> 
  <script type="text/javascript">
  !function($) {
    var table = [{"url": "/agency/banners_stats/?date1=26-06-2017&date2=28-06-2017&date_type=day&do=1&rt=campaign&oi=5370438&as_json=1", "count": 1, "count_perc": 1.0, "time_avg": 6.828, "time_max": 6.828, "time_med": 6.828, "time_sum": 6.828, "time_perc": 13.284}, {"url": "/api/1/banners/?campaign=7789704", "count": 1, "count_perc": 1.0, "time_avg": 2.577, "time_max": 2.577, "time_med": 2.577, "time_sum": 2.577, "time_perc": 5.013}, {"url": "/api/v2/banner/25013061", "count": 1, "count_perc": 1.0, "time_avg": 2.5, "time_max": 2.5, "time_med": 2.5, "time_sum": 2.5, "time_perc": 4.864}, {"url": "/api/v2/banner/25047605", "count": 1, "count_perc": 1.0, "time_avg": 2.196, "time_max": 2.196, "time_med": 2.196, "time_sum": 2.196, "time_perc": 4.272}, {"url": "/api/v2/banner/24915508", "count": 1, "count_perc": 1.0, "time_avg": 2.115, "time_max": 2.115, "time_med": 2.115, "time_sum": 2.115, "time_perc": 4.115}, {"url": "/api/v2/banner/25006136", "count": 1, "count_perc": 1.0, "time_avg": 1.973, "time_max": 1.973, "time_med": 1.973, "time_sum": 1.973, "time_perc": 3.838}, {"url": "/api/v2/banner/25040266", "count": 1, "count_perc": 1.0, "time_avg": 1.68, "time_max": 1.68, "time_med": 1.68, "time_sum": 1.68, "time_perc": 3.268}, {"url": "/api/v2/banner/25032604", "count": 1, "count_perc": 1.0, "time_avg": 1.665, "time_max": 1.665, "time_med": 1.665, "time_sum": 1.665, "time_perc": 3.239}, {"url": "/api/v2/banner/25047606", "count": 1, "count_perc": 1.0, "time_avg": 1.49, "time_max": 1.49, "time_med": 1.49, "time_sum": 1.49, "time_perc": 2.899}, {"url": "/api/v2/banner/24998073", "count": 1, "count_perc": 1.0, "time_avg": 1.403, "time_max": 1.403, "time_med": 1.403, "time_sum": 1.403, "time_perc": 2.729}, {"url": "/api/v2/banner/25019908", "count": 1, "count_perc": 1.0, "time_avg": 1.321, "time_max": 1.321, "time_med": 1.321, "time_sum": 1.321, "time_perc": 2.57}, {"url": "/api/v2/banner/24913311", "count": 1, "count_perc": 1.0, "time_avg": 1.243, "time_max": 1.243, "time_med": 1.243, "time_sum": 1.243, "time_perc": 2.418}, {"url": "/agency/campaigns/5370439/banners/bulk_read/", "count": 1, "count_perc": 1.0, "time_avg": 1.236, "time_max": 1.236, "time_med": 1.236, "time_sum": 1.236, "time_perc": 2.405}, {"url": "/api/v2/banner/787365", "count": 1, "count_perc": 1.0, "time_avg": 1.204, "time_max": 1.204, "time_med": 1.204, "time_sum": 1.204, "time_perc": 2.342}, {"url": "/api/v2/banner/26616315", "count": 1, "count_perc": 1.0, "time_avg": 1.152, "time_max": 1.152, "time_med": 1.152, "time_sum": 1.152, "time_perc": 2.241}, {"url": "/api/v2/banner/25047662", "count": 1, "count_perc": 1.0, "time_avg": 1.051, "time_max": 1.051, "time_med": 1.051, "time_sum": 1.051, "time_perc": 2.045}, {"url": "/api/v2/banner/26614593", "count": 1, "count_perc": 1.0, "time_avg": 1.017, "time_max": 1.017, "time_med": 1.017, "time_sum": 1.017, "time_perc": 1.979}, {"url": "/api/v2/banner/25013431", "count": 1, "count_perc": 1.0, "time_avg": 0.917, "time_max": 0.917, "time_med": 0.917, "time_sum": 0.917, "time_perc": 1.784}, {"url": "/api/v2/group/2949911/banners", "count": 1, "count_perc": 1.0, "time_avg": 0.889, "time_max": 0.889, "time_med": 0.889, "time_sum": 0.889, "time_perc": 1.73}, {"url": "/api/v2/banner/26650245", "count": 1, "count_perc": 1.0, "time_avg": 0.845, "time_max": 0.845, "time_med": 0.845, "time_sum": 0.845, "time_perc": 1.644}, {"url": "/api/v2/banner/25023278", "count": 1, "count_perc": 1.0, "time_avg": 0.841, "time_max": 0.841, "time_med": 0.841, "time_sum": 0.841, "time_perc": 1.636}, {"url": "/api/1/banners/?campaign=1459862", "count": 1, "count_perc": 1.0, "time_avg": 0.768, "time_max": 0.768, "time_med": 0.768, "time_sum": 0.768, "time_perc": 1.494}, {"url": "/api/v2/banner/25020545", "count": 1, "count_perc": 1.0, "time_avg": 0.738, "time_max": 0.738, "time_med": 0.738, "time_sum": 0.738, "time_perc": 1.436}, {"url": "/api/v2/banner/24987703", "count": 1, "count_perc": 1.0, "time_avg": 0.726, "time_max": 0.726, "time_med": 0.726, "time_sum": 0.726, "time_perc": 1.412}, {"url": "/api/v2/slot/4705/groups", "count": 1, "count_perc": 1.0, "time_avg": 0.704, "time_max": 0.704, "time_med": 0.704, "time_sum": 0.704, "time_perc": 1.37}, {"url": "/api/v2/group/7820984/statistic/sites/?date_type=day&date_from=2017-06-28&date_to=2017-06-28", "count": 1, "count_perc": 1.0, "time_avg": 0.691, "time_max": 0.691, "time_med": 0.691, "time_sum": 0.691, "time_perc": 1.344}, {"url": "/api/v2/group/1823183/banners", "count": 1, "count_perc": 1.0, "time_avg": 0.68, "time_max": 0.68, "time_med": 0.68, "time_sum": 0.68, "time_perc": 1.323}, {"url": "/api/v2/group/1769230/banners", "count": 1, "count_perc": 1.0, "time_avg": 0.628, "time_max": 0.628, "time_med": 0.628, "time_sum": 0.628, "time_perc": 1.222}, {"url": "/api/v2/banner/26303040", "count": 1, "count_perc": 1.0, "time_avg": 0.618, "time_max": 0.618, "time_med": 0.618, "time_sum": 0.618, "time_perc": 1.202}, {"url": "/api/v2/group/2921166/banners", "count": 1, "count_perc": 1.0, "time_avg": 0.539, "time_max": 0.539, "time_med": 0.539, "time_sum": 0.539, "time_perc": 1.049}, {"url": "/api/v2/banner/26596202", "count": 1, "count_perc": 1.0, "time_avg": 0.525, "time_max": 0.525, "time_med": 0.525, "time_sum": 0.525, "time_perc": 1.021}, {"url": "/api/v2/banner/26613668", "count": 1, "count_perc": 1.0, "time_avg": 0.443, "time_max": 0.443, "time_med": 0.443, "time_sum": 0.443, "time_perc": 0.862}, {"url": "/api/v2/banner/26629313", "count": 1, "count_perc": 1.0, "time_avg": 0.407, "time_max": 0.407, "time_med": 0.407, "time_sum": 0.407, "time_perc": 0.792}, {"url": "/api/v2/banner/25019354", "count": 1, "count_perc": 1.0, "time_avg": 0.39, "time_max": 0.39, "time_med": 0.39, "time_sum": 0.39, "time_perc": 0.759}, {"url": "/api/v2/banner/26604444", "count": 1, "count_perc": 1.0, "time_avg": 0.37, "time_max": 0.37, "time_med": 0.37, "time_sum": 0.37, "time_perc": 0.72}, {"url": "/api/v2/banner/25048498", "count": 1, "count_perc": 1.0, "time_avg": 0.36, "time_max": 0.36, "time_med": 0.36, "time_sum": 0.36, "time_perc": 0.7}, {"url": "/api/1/banners/?campaign=1236490", "count": 1, "count_perc": 1.0, "time_avg": 0.314, "time_max": 0.314, "time_med": 0.314, "time_sum": 0.314, "time_perc": 0.611}, {"url": "/api/1/banners/?campaign=1321998", "count": 1, "count_perc": 1.0, "time_avg": 0.311, "time_max": 0.311, "time_med": 0.311, "time_sum": 0.311, "time_perc": 0.605}, {"url": "/api/v2/banner/26740463", "count": 1, "count_perc": 1.0, "time_avg": 0.273, "time_max": 0.273, "time_med": 0.273, "time_sum": 0.273, "time_perc": 0.531}, {"url": "/api/1/banners/?campaign=1459995", "count": 1, "count_perc": 1.0, "time_avg": 0.216, "time_max": 0.216, "time_med": 0.216, "time_sum": 0.216, "time_perc": 0.42}, {"url": "/api/1/banners/?campaign=2765576", "count": 1, "count_perc": 1.0, "time_avg": 0.216, "time_max": 0.216, "time_med": 0.216, "time_sum": 0.216, "time_perc": 0.42}, {"url": "/api/v2/banner/797816", "count": 1, "count_perc": 1.0, "time_avg": 0.208, "time_max": 0.208, "time_med": 0.208, "time_sum": 0.208, "time_perc": 0.405}, {"url": "/api/v2/banner/16852664", "count": 1, "count_perc": 1.0, "time_avg": 0.199, "time_max": 0.199, "time_med": 0.199, "time_sum": 0.199, "time_perc": 0.387}, {"url": "/api/v2/banner/10980861", "count": 1, "count_perc": 1.0, "time_avg": 0.194, "time_max": 0.194, "time_med": 0.194, "time_sum": 0.194, "time_perc": 0.377}, {"url": "/api/v2/banner/16168711", "count": 1, "count_perc": 1.0, "time_avg": 0.19, "time_max": 0.19, "time_med": 0.19, "time_sum": 0.19, "time_perc": 0.37}, {"url": "/api/v2/banner/26613316", "count": 1, "count_perc": 1.0, "time_avg": 0.189, "time_max": 0.189, "time_med": 0.189, "time_sum": 0.189, "time_perc": 0.368}, {"url": "/api/1/campaigns/?id=7789719", "count": 1, "count_perc": 1.0, "time_avg": 0.186, "time_max": 0.186, "time_med": 0.186, "time_sum": 0.186, "time_perc": 0.362}, {"url": "/api/v2/banner/7763463", "count": 1, "count_perc": 1.0, "time_avg": 0.181, "time_max": 0.181, "time_med": 0.181, "time_sum": 0.181, "time_perc": 0.352}, {"url": "/api/1/banners/?campaign=7789719", "count": 1, "count_perc": 1.0, "time_avg": 0.179, "time_max": 0.179, "time_med": 0.179, "time_sum": 0.179, "time_perc": 0.348}, {"url": "/api/1/campaigns/?id=7789711", "count": 1, "count_perc": 1.0, "time_avg": 0.163, "time_max": 0.163, "time_med": 0.163, "time_sum": 0.163, "time_perc": 0.317}, {"url": "/api/v2/banner/21456892", "count": 1, "count_perc": 1.0, "time_avg": 0.158, "time_max": 0.158, "time_med": 0.158, "time_sum": 0.158, "time_perc": 0.307}, {"url": "/api/v2/slot/4822/groups", "count": 1, "count_perc": 1.0, "time_avg": 0.157, "time_max": 0.157, "time_med": 0.157, "time_sum": 0.157, "time_perc": 0.305}, {"url": "/api/v2/banner/16803530", "count": 1, "count_perc": 1.0, "time_avg": 0.156, "time_max": 0.156, "time_med": 0.156, "time_sum": 0.156, "time_perc": 0.303}, {"url": "/api/1/campaigns/?id=7789720", "count": 1, "count_perc": 1.0, "time_avg": 0.152, "time_max": 0.152, "time_med": 0.152, "time_sum": 0.152, "time_perc": 0.296}, {"url": "/api/1/banners/?campaign=7789711", "count": 1, "count_perc": 1.0, "time_avg": 0.151, "time_max": 0.151, "time_med": 0.151, "time_sum": 0.151, "time_perc": 0.294}, {"url": "/api/1/banners/?campaign=7789714", "count": 1, "count_perc": 1.0, "time_avg": 0.151, "time_max": 0.151, "time_med": 0.151, "time_sum": 0.151, "time_perc": 0.294}, {"url": "/api/1/banners/?campaign=7789717", "count": 1, "count_perc": 1.0, "time_avg": 0.151, "time_max": 0.151, "time_med": 0.151, "time_sum": 0.151, "time_perc": 0.294}, {"url": "/api/v2/banner/11043399", "count": 1, "count_perc": 1.0, "time_avg": 0.151, "time_max": 0.151, "time_med": 0.151, "time_sum": 0.151, "time_perc": 0.294}, {"url": "/api/1/campaigns/?id=3888290", "count": 1, "count_perc": 1.0, "time_avg": 0.15, "time_max": 0.15, "time_med": 0.15, "time_sum": 0.15, "time_perc": 0.292}, {"url": "/api/1/banners/?campaign=7789720", "count": 1, "count_perc": 1.0, "time_avg": 0.149, "time_max": 0.149, "time_med": 0.149, "time_sum": 0.149, "time_perc": 0.29}, {"url": "/api/1/banners/?campaign=7789709", "count": 1, "count_perc": 1.0, "time_avg": 0.148, "time_max": 0.148, "time_med": 0.148, "time_sum": 0.148, "time_perc": 0.288}, {"url": "/api/1/campaigns/?id=7789714", "count": 1, "count_perc": 1.0, "time_avg": 0.147, "time_max": 0.147, "time_med": 0.147, "time_sum": 0.147, "time_perc": 0.286}, {"url": "/api/v2/internal/banner/24294027/info", "count": 1, "count_perc": 1.0, "time_avg": 0.146, "time_max": 0.146, "time_med": 0.146, "time_sum": 0.146, "time_perc": 0.284}, {"url": "/api/1/campaigns/?id=7789709", "count": 1, "count_perc": 1.0, "time_avg": 0.146, "time_max": 0.146, "time_med": 0.146, "time_sum": 0.146, "time_perc": 0.284}, {"url": "/api/v2/banner/7957213", "count": 1, "count_perc": 1.0, "time_avg": 0.145, "time_max": 0.145, "time_med": 0.145, "time_sum": 0.145, "time_perc": 0.282}, {"url": "/api/1/campaigns/?id=7789717", "count": 1, "count_perc": 1.0, "time_avg": 0.145, "time_max": 0.145, "time_med": 0.145, "time_sum": 0.145, "time_perc": 0.282}, {"url": "/api/1/campaigns/?id=5285017", "count": 1, "count_perc": 1.0, "time_avg": 0.144, "time_max": 0.144, "time_med": 0.144, "time_sum": 0.144, "time_perc": 0.28}, {"url": "/api/v2/banner/1717161", "count": 1, "count_perc": 1.0, "time_avg": 0.138, "time_max": 0.138, "time_med": 0.138, "time_sum": 0.138, "time_perc": 0.268}, {"url": "/api/1/photogenic_banners/list/?server_name=WIN7RB4", "count": 1, "count_perc": 1.0, "time_avg": 0.133, "time_max": 0.133, "time_med": 0.133, "time_sum": 0.133, "time_perc": 0.259}, {"url": "/api/v2/internal/banner/24288647/info", "count": 1, "count_perc": 1.0, "time_avg": 0.072, "time_max": 0.072, "time_med": 0.072, "time_sum": 0.072, "time_perc": 0.14}, {"url": "/api/v2/group/7786682/statistic/sites/?date_type=day&date_from=2017-06-28&date_to=2017-06-28", "count": 1, "count_perc": 1.0, "time_avg": 0.068, "time_max": 0.068, "time_med": 0.068, "time_sum": 0.068, "time_perc": 0.132}, {"url": "/api/v2/group/7820986/statistic/sites/?date_type=day&date_from=2017-06-28&date_to=2017-06-28", "count": 1, "count_perc": 1.0, "time_avg": 0.068, "time_max": 0.068, "time_med": 0.068, "time_sum": 0.068, "time_perc": 0.132}, {"url": "/api/v2/group/7786679/statistic/sites/?date_type=day&date_from=2017-06-28&date_to=2017-06-28", "count": 1, "count_perc": 1.0, "time_avg": 0.067, "time_max": 0.067, "time_med": 0.067, "time_sum": 0.067, "time_perc": 0.13}, {"url": "/api/v2/group/7820982/statistic/sites/?date_type=day&date_from=2017-06-28&date_to=2017-06-28", "count": 1, "count_perc": 1.0, "time_avg": 0.065, "time_max": 0.065, "time_med": 0.065, "time_sum": 0.065, "time_perc": 0.126}, {"url": "/api/v2/group/7820980/statistic/sites/?date_type=day&date_from=2017-06-28&date_to=2017-06-28", "count": 1, "count_perc": 1.0, "time_avg": 0.064, "time_max": 0.064, "time_med": 0.064, "time_sum": 0.064, "time_perc": 0.125}, {"url": "/api/v2/internal/banner/24273184/info", "count": 1, "count_perc": 1.0, "time_avg": 0.063, "time_max": 0.063, "time_med": 0.063, "time_sum": 0.063, "time_perc": 0.123}, {"url": "/api/v2/group/7808057/statistic/sites/?date_type=day&date_from=2017-06-28&date_to=2017-06-28", "count": 1, "count_perc": 1.0, "time_avg": 0.063, "time_max": 0.063, "time_med": 0.063, "time_sum": 0.063, "time_perc": 0.123}, {"url": "/api/v2/group/7786683/statistic/sites/?date_type=day&date_from=2017-06-28&date_to=2017-06-28", "count": 1, "count_perc": 1.0, "time_avg": 0.061, "time_max": 0.061, "time_med": 0.061, "time_sum": 0.061, "time_perc": 0.119}, {"url": "/api/v2/group/7820981/statistic/sites/?date_type=day&date_from=2017-06-28&date_to=2017-06-28", "count": 1, "count_perc": 1.0, "time_avg": 0.06, "time_max": 0.06, "time_med": 0.06, "time_sum": 0.06, "time_perc": 0.117}, {"url": "/api/v2/internal/banner/24197629/info", "count": 1, "count_perc": 1.0, "time_avg": 0.058, "time_max": 0.058, "time_med": 0.058, "time_sum": 0.058, "time_perc": 0.113}, {"url": "/api/v2/group/7786984/statistic/sites/?date_type=day&date_from=2017-06-28&date_to=2017-06-28", "count": 1, "count_perc": 1.0, "time_avg": 0.056, "time_max": 0.056, "time_med": 0.056, "time_sum": 0.056, "time_perc": 0.109}, {"url": "/accounts/login/", "count": 1, "count_perc": 1.0, "time_avg": 0.035, "time_max": 0.035, "time_med": 0.035, "time_sum": 0.035, "time_perc": 0.068}, {"url": "/export/appinstall_raw/2017-06-29/", "count": 8, "count_perc": 8.0, "time_avg": 0.003, "time_max": 0.004, "time_med": 0.003, "time_sum": 0.021, "time_perc": 0.041}, {"url": "/export/appinstall_raw/2017-06-30/", "count": 8, "count_perc": 8.0, "time_avg": 0.001, "time_max": 0.001, "time_med": 0.001, "time_sum": 0.008, "time_perc": 0.016}, {"url": "/api/v2/test/auth/", "count": 1, "count_perc": 1.0, "time_avg": 0.003, "time_max": 0.003, "time_med": 0.003, "time_sum": 0.003, "time_perc": 0.006}, {"url": "/api/v2/target/12988/list?status=1", "count": 1, "count_perc": 1.0, "time_avg": 0.003, "time_max": 0.003, "time_med": 0.003, "time_sum": 0.003, "time_perc": 0.006}];
    var reportDates;
    var columns = new Array();
    var lastRow = 150;
    var $table = $(".report-table-body");
    var $header = $(".report-table-header-row");
    var $selector = $(".report-date-selector");

    $(document).ready(function() {
      $(window).bind("scroll", bindScroll);
        var row = table[0];
        for (k in row) {
          columns.push(k);
        }
        columns = columns.sort();
        columns = columns.slice(columns.length -1, columns.length).concat(columns.slice(0, columns.length -1));
        drawColumns();
        drawRows(table.slice(0, lastRow));
        $(".report-table").tablesorter(); 
    });

    function drawColumns() {
      for (var i = 0; i < columns.length; i++) {
        var $th = $("<th></th>").text(columns[i])
                                .addClass("report-table-header-cell")
        $header.append($th);
      }
    }

    function drawRows(rows) {
      for (var i = 0; i < rows.length; i++) {
        var row = rows[i];
        var $row = $("<tr></tr>").addClass("report-table-body-row");
        for (var j = 0; j < columns.length; j++) {
          var columnName = columns[j];
          var $cell = $("<td></td>").addClass("report-table-body-cell");
          if (columnName == "url") {
            var url = "https://rb.mail.ru" + row[columnName];
            var $link = $("<a></a>").attr("href", url)
                                    .attr("title", url)
                                    .attr("target", "_blank")
                                    .addClass("clipped")
                                    .addClass("url")
                                    .text(row[columnName]);
            $cell.addClass("report-table-body-cell-url");
            $cell.append($link);
          }
          else {
            $cell.text(row[columnName]);
            if (columnName == "time_avg" && row[columnName] > 0.9) {
              $cell.addClass("alert");
            }
          }
          $row.append($cell);
        }
        $table.append($row);
      }
      $(".report-table").trigger("update"); 
    }

    function bindScroll() {
      if($(window).scrollTop() == $(document).height() - $(window).height()) {
        if (lastRow < 1000) {
          drawRows(table.slice(lastRow, lastRow + 50));
          lastRow += 50;
        }
      }
    }

  }(window.jQuery)
  </script>
</body>
</html>
